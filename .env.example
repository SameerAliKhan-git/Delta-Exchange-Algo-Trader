# ==============================================================================
# DELTA EXCHANGE ALGO TRADING BOT - ENVIRONMENT CONFIGURATION
# ==============================================================================
# IMPORTANT: Copy this file to .env and fill in your values
# NEVER commit .env to version control!
# ==============================================================================

# ================================
# DELTA EXCHANGE API CREDENTIALS
# ================================
# Get your API keys from: https://india.delta.exchange/app/api_management
# Use TESTNET keys first for testing!

DELTA_API_KEY=your_api_key_here
DELTA_API_SECRET=your_api_secret_here

# Base URL - USE TESTNET FIRST!
# Testnet: https://cdn-ind.testnet.deltaex.org
# Production: https://api.india.delta.exchange
DELTA_BASE_URL=https://cdn-ind.testnet.deltaex.org

# ================================
# TRADING CONFIGURATION
# ================================
# Product to trade (get from /v2/products endpoint)
PRODUCT_SYMBOL=BTCUSD
PRODUCT_ID=139

# Trading mode: paper (simulated) or live
TRADING_MODE=paper

# ================================
# RISK MANAGEMENT (CRITICAL!)
# ================================
# Maximum risk per trade in INR
RISK_PER_TRADE_INR=500

# Maximum daily loss before shutdown (INR)
MAX_DAILY_LOSS_INR=5000

# Maximum number of concurrent open positions
MAX_OPEN_POSITIONS=3

# Minimum seconds between trades (cooldown)
MIN_TRADE_COOLDOWN_SECONDS=60

# Stop loss percentage (as decimal, 0.02 = 2%)
DEFAULT_STOP_LOSS_PCT=0.02

# Take profit percentage (as decimal, 0.04 = 4%)
DEFAULT_TAKE_PROFIT_PCT=0.04

# Enable trailing stop (true/false)
ENABLE_TRAILING_STOP=true

# Trailing stop distance percentage
TRAILING_STOP_PCT=0.015

# Maximum position size (in contracts)
MAX_POSITION_SIZE=10

# ================================
# CAPITAL-AWARE SIZING (V2)
# ================================
# Maximum exposure as percentage of available capital (0.25 = 25%)
EXPOSURE_PCT=0.25

# Maximum premium spend for options as percentage of capital (0.005 = 0.5%)
OPTION_MAX_PREMIUM_PCT=0.005

# Composite confidence threshold for trade execution (0.65 = 65%)
CONFIDENCE_THRESHOLD=0.65

# Minimum 24h volume in USD for instrument to be considered liquid
MIN_LIQUIDITY_USD=1000

# Target delta for option selection (0.35 = 35 delta)
OPTION_TARGET_DELTA=0.35

# Minimum days to expiry for options
OPTION_MIN_EXPIRY_DAYS=3

# Maximum days to expiry for options
OPTION_MAX_EXPIRY_DAYS=30

# ================================
# STRATEGY PARAMETERS
# ================================
# EMA periods
EMA_FAST_PERIOD=20
EMA_SLOW_PERIOD=50

# ATR period for volatility
ATR_PERIOD=14

# Sentiment score thresholds (-1 to 1)
SENTIMENT_BULL_THRESHOLD=0.35
SENTIMENT_BEAR_THRESHOLD=-0.35

# Orderbook imbalance threshold
OB_IMBALANCE_THRESHOLD=0.05

# Minimum momentum threshold (percentage)
MOMENTUM_THRESHOLD=0.002

# Price buffer size (number of data points to keep)
PRICE_BUFFER_SIZE=500

# Warmup period (minimum data points before trading)
WARMUP_PERIOD=60

# ================================
# DATA INGESTION
# ================================
# Ticker polling interval (seconds)
TICKER_POLL_INTERVAL=5

# Orderbook depth to fetch
ORDERBOOK_DEPTH=10

# ================================
# SENTIMENT DATA SOURCES
# ================================
# Twitter/X API (optional)
TWITTER_BEARER_TOKEN=
TWITTER_API_KEY=
TWITTER_API_SECRET=

# Reddit API (optional)
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=
REDDIT_USER_AGENT=DeltaAlgoBot/1.0

# NewsAPI (optional)
NEWSAPI_KEY=

# CryptoPanic API (optional)
CRYPTOPANIC_API_KEY=

# ================================
# ALERTING
# ================================
# Telegram bot for alerts
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Slack webhook for alerts
SLACK_WEBHOOK_URL=

# Alert on these events (comma-separated)
ALERT_EVENTS=order_placed,order_filled,stop_triggered,daily_loss_limit,error,kill_switch

# ================================
# MONITORING
# ================================
# Prometheus metrics port
PROMETHEUS_PORT=8000

# Enable metrics endpoint
ENABLE_METRICS=true

# ================================
# DATABASE
# ================================
# SQLite database for trade logs
DATABASE_URL=sqlite:///./data/trades.db

# ================================
# LOGGING
# ================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path
LOG_FILE=./logs/trading.log

# Enable JSON logging for production
JSON_LOGGING=false

# ================================
# SYSTEM
# ================================
# Kill switch file path (create this file to stop trading)
KILL_SWITCH_FILE=./KILL_SWITCH

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=30

# Auto-restart on crash (handled by Docker/systemd)
AUTO_RESTART=true

# Timezone
TIMEZONE=Asia/Kolkata

# ================================
# BACKTEST
# ================================
# Historical data file for backtesting
BACKTEST_DATA_FILE=./data/historical_prices.csv

# Backtest start date (YYYY-MM-DD)
BACKTEST_START_DATE=2024-01-01

# Backtest end date (YYYY-MM-DD)
BACKTEST_END_DATE=2024-12-01

# Initial capital for backtest (INR)
BACKTEST_INITIAL_CAPITAL=100000
